# =============================================================================
# CONFIGURACIÓN DE VARIABLES DE ENTORNO - BOOKWORM
# =============================================================================
# Copiar este archivo a .env y completar con tus credenciales reales
# 
# Comando: cp .env.example .env
#
# ⚠️ IMPORTANTE: NO commitear el archivo .env al repositorio (está en .gitignore)
# =============================================================================

# =============================================================================
# POSTGRESQL LOCAL (Back-users)
# =============================================================================
# Base de datos local en Docker - Valores por defecto
POSTGRES_DB=users_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# =============================================================================
# NEO4J AURA (Back-recommendations) - CLOUD
# =============================================================================
# Obtener estas credenciales desde Neo4j Aura Console
# https://console.neo4j.io/
NEO4J_URI=neo4j+s://xxxxxxxx.databases.neo4j.io
NEO4J_USER=neo4j
NEO4J_PASSWORD=tu_password_de_neo4j_aura_aqui

# =============================================================================
# SERVICIOS DEL GATEWAY (Docker Network)
# =============================================================================
# URLs de los microservicios dentro de la red Docker
USERS_SERVICE_URL=http://back-users:8001
REVIEWS_SERVICE_URL=http://back-reviews:8000
RECOMMENDATIONS_SERVICE_URL=http://back-recommendations:8002
SCRAPING_SERVICE_URL=http://back-scraping:8080

# =============================================================================
# BASES DE DATOS LOCALES (Docker)
# =============================================================================
# Estas NO necesitan modificarse (son para contenedores locales)

# MongoDB (Back-reviews)
MONGODB_URL=mongodb://mongodb:27017
MONGO_DB_NAME=reviews_db

# MySQL (Back-Web_Scraping)
MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=book_prices
MYSQL_USER=scraper
MYSQL_PASSWORD=scraperpass

# Kafka
KAFKA_BROKER=kafka:9092
KAFKA_TOPIC=recommendation-scrapping

# =============================================================================
# THROTTLING CONFIGURATION (GraphQL Gateway)
# =============================================================================
# Habilitar o deshabilitar throttling (true/false)
ENABLE_THROTTLING=true

# Profundidad máxima de queries GraphQL
# Ejemplo: { user { profile { avatar } } } = profundidad 3
# Recomendado: 5-7 para aplicaciones normales
MAX_QUERY_DEPTH=5

# Complejidad máxima de queries GraphQL
# Cada campo suma puntos, queries complejas pueden ser rechazadas
# Recomendado: 100-200 para aplicaciones normales
MAX_QUERY_COMPLEXITY=100

# Rate limit por usuario autenticado (requests por minuto)
# Ejemplo: 60 = 1 request por segundo
# Recomendado: 60-120 para aplicaciones normales
USER_RATE_LIMIT=60

# =============================================================================
# CONFIGURACIÓN POR AMBIENTE
# =============================================================================
# Para DESARROLLO: Valores permisivos
# ENABLE_THROTTLING=false  # Desactivar completamente
# MAX_QUERY_DEPTH=10
# MAX_QUERY_COMPLEXITY=500
# USER_RATE_LIMIT=1000

# Para PRODUCCIÓN: Valores restrictivos
# ENABLE_THROTTLING=true
# MAX_QUERY_DEPTH=5
# MAX_QUERY_COMPLEXITY=100
# USER_RATE_LIMIT=60